{"ast":null,"code":"import _toConsumableArray from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/src/components/main/mapbox.js\";\nimport React, { Component } from 'react';\nimport ReactMapboxGl, { Marker, Layer, Feature, Popup } from \"react-mapbox-gl\";\nimport { GeoJSONLayer } from \"react-mapbox-gl\";\nvar Map = ReactMapboxGl({\n  accessToken: process.env.REACT_APP_KEY\n});\n\nvar mbxGeocoding = require('@mapbox/mapbox-sdk/services/geocoding');\n\nvar geocodingClient = mbxGeocoding({\n  accessToken: process.env.REACT_APP_KEY\n});\n\nvar Mapbox =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Mapbox, _React$Component);\n\n  function Mapbox() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Mapbox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Mapbox)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      locations: [],\n      listings: [],\n      currentListing: null\n    };\n\n    _this.makeFeatures = function () {\n      console.log(\"locations\", _this.state.locations);\n\n      var pins = _this.state.locations.map(function (coordinate) {\n        return React.createElement(Marker, {\n          coordinates: coordinate,\n          onClick: function onClick(e) {\n            return _this.clickHandler(e);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        });\n      });\n\n      console.log(\"pins\", pins);\n      return pins;\n    };\n\n    _this.makePopups = function () {\n      var popups = _this.state.listings.map(function (listing) {\n        return React.createElement(Popup, {\n          coordinates: listing.coordinates.split(\",\").map(function (n) {\n            return parseFloat(n);\n          }),\n          anchor: \"top\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, React.createElement(\"ul\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, \"Item: \", listing.item), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, \"Condition: \", listing.condition), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, \"Location: \", listing.location), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, \"Picture: \", React.createElement(\"img\", {\n          src: listing.picture,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }))));\n      });\n\n      return popups;\n    };\n\n    _this.clickHandler = function (e) {\n      console.log(e.lngLat);\n      var coordinates = [];\n      coordinates.push(e.lngLat.lng);\n      coordinates.push(e.lngLat.lat);\n      console.log(coordinates);\n      return React.createElement(Popup, {\n        coordinates: coordinates,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"hello\"));\n    };\n\n    return _this;\n  }\n\n  _createClass(Mapbox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch('http://localhost:4000/api/v1/listings').then(function (r) {\n        return r.json();\n      }).then(function (parsed) {\n        _this2.setState({\n          listings: parsed\n        });\n\n        console.log(_this2.state.listings);\n\n        _this2.state.listings.map(function (listing) {\n          var locations = _this2.state.locations;\n          var coordinates = listing.coordinates.split(\",\").map(function (n) {\n            return parseFloat(n);\n          });\n\n          _this2.setState({\n            locations: [].concat(_toConsumableArray(locations), [coordinates])\n          });\n        });\n\n        console.log(\"locations\", _this2.state.locations);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Map, {\n        style: \"mapbox://styles/mapbox/streets-v9\",\n        center: [-74.0060, 40.7128],\n        containerStyle: {\n          height: \"100vh\",\n          width: \"100vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Layer, {\n        type: \"symbol\",\n        id: \"marker\",\n        layout: {\n          \"icon-image\": \"rocket-15\"\n        },\n        color: \"#01FEDC\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, this.makeFeatures()), this.makePopups()));\n    }\n  }]);\n\n  return Mapbox;\n}(React.Component);\n\nexport default Mapbox;","map":{"version":3,"sources":["/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/src/components/main/mapbox.js"],"names":["React","Component","ReactMapboxGl","Marker","Layer","Feature","Popup","GeoJSONLayer","Map","accessToken","process","env","REACT_APP_KEY","mbxGeocoding","require","geocodingClient","Mapbox","state","locations","listings","currentListing","makeFeatures","console","log","pins","map","coordinate","e","clickHandler","makePopups","popups","listing","coordinates","split","n","parseFloat","item","condition","location","picture","lngLat","push","lng","lat","fetch","then","r","json","parsed","setState","height","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ReactMapboxGl, { Marker, Layer, Feature, Popup } from \"react-mapbox-gl\";\nimport { GeoJSONLayer } from \"react-mapbox-gl\";\n\nconst Map = ReactMapboxGl({\n  accessToken: process.env.REACT_APP_KEY\n})\n\nconst mbxGeocoding = require('@mapbox/mapbox-sdk/services/geocoding');\nconst geocodingClient = mbxGeocoding({ accessToken: process.env.REACT_APP_KEY });\n\nclass Mapbox extends React.Component {\n\nstate = {\n  locations: [],\n  listings: [],\n  currentListing: null\n}\n\ncomponentDidMount() {\n  fetch('http://localhost:4000/api/v1/listings')\n  .then(r => r.json())\n  .then(parsed => {\n    this.setState({listings: parsed})\n    console.log(this.state.listings)\n\n    this.state.listings.map(listing => {\n        let locations = this.state.locations\n        let coordinates = listing.coordinates.split(\",\").map(n => parseFloat(n))\n        this.setState({locations: [...locations, coordinates]})\n    })\n    console.log(\"locations\", this.state.locations)\n  })\n}\n\nmakeFeatures = () => {\n  console.log(\"locations\", this.state.locations)\n  let pins = this.state.locations.map(coordinate =>\n    <Marker coordinates={coordinate} onClick={(e) => this.clickHandler(e)}/>\n  )\n  console.log(\"pins\",pins)\n  return(pins)\n}\n\nmakePopups = () => {\n  let popups = this.state.listings.map(listing =>\n  <Popup\n    coordinates={listing.coordinates.split(\",\").map(n => parseFloat(n))}\n    anchor=\"top\"\n  >\n      <ul>\n        <li>Item: {listing.item}</li>\n        <li>Condition: {listing.condition}</li>\n        <li>Location: {listing.location}</li>\n        <li>Picture: <img src={listing.picture}/></li>\n      </ul>\n  </Popup>\n)\n  return( popups )\n}\n\nclickHandler = (e) => {\n  console.log(e.lngLat)\n  let coordinates = []\n  coordinates.push(e.lngLat.lng)\n  coordinates.push(e.lngLat.lat)\n  console.log(coordinates)\n  return (\n    <Popup coordinates={coordinates}\n    >\n      <div>\n        hello\n      </div>\n    </Popup>\n  )\n}\n\nrender() {\n  return (\n    <div>\n      <Map\n      style=\"mapbox://styles/mapbox/streets-v9\"\n      center={[-74.0060, 40.7128]}\n      containerStyle={{\n        height: \"100vh\",\n        width: \"100vw\"\n      }}>\n\n        <Layer\n        type=\"symbol\"\n        id=\"marker\"\n        layout={{ \"icon-image\": \"rocket-15\" }}\n        color=\"#01FEDC\">\n\n          {this.makeFeatures()}\n\n        </Layer>\n        {this.makePopups()}\n\n\n\n      </Map>\n\n\n    </div>\n  )\n}\n\n\n}\n\nexport default Mapbox\n"]},"metadata":{},"sourceType":"module"}