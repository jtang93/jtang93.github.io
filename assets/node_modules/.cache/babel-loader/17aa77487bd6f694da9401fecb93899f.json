{"ast":null,"code":"import _classCallCheck from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/src/components/main/mapbox.js\";\nimport React, { Component } from 'react';\nimport ReactMapboxGl, { Layer, Feature } from \"react-mapbox-gl\";\nimport { GeoJSONLayer } from \"react-mapbox-gl\";\nvar Map = ReactMapboxGl({\n  accessToken: \"pk.eyJ1IjoianRhbmc5MyIsImEiOiJjanB1OXIyZXQwZWZ4M3hudHM4NGl0cmc3In0.q6DGhvJla097_6b-RMi0Fw\"\n});\n\nvar mbxGeocoding = require('@mapbox/mapbox-sdk/services/geocoding');\n\nvar geocodingClient = mbxGeocoding({\n  accessToken: 'pk.eyJ1IjoianRhbmc5MyIsImEiOiJjanB1OXIyZXQwZWZ4M3hudHM4NGl0cmc3In0.q6DGhvJla097_6b-RMi0Fw'\n});\n\nvar Mapbox =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Mapbox, _React$Component);\n\n  function Mapbox() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Mapbox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Mapbox)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.locations = [];\n\n    _this.makeFeatures = function () {\n      console.log(\"locations\", locations);\n      locations.forEach(function (coordinate) {\n        return React.createElement(Feature, {\n          coordinates: coordinate,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Mapbox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      fetch('http://localhost:4000/api/v1/listings').then(function (r) {\n        return r.json();\n      }).then(function (parsed) {\n        geojson = parsed;\n        console.log(geojson);\n        geojson.map(function (listing) {\n          geocodingClient.forwardGeocode({\n            query: \"\".concat(listing.location),\n            limit: 1\n          }).send().then(function (response) {\n            var match = response.body.features[0].center;\n            locations.push(match);\n            console.log(locations);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(Map, {\n        style: \"mapbox://styles/mapbox/streets-v9\",\n        center: [-74.0060, 40.7128],\n        containerStyle: {\n          height: \"100vh\",\n          width: \"100vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Layer, {\n        type: \"symbol\",\n        id: \"marker\",\n        layout: {\n          \"icon-image\": \"marker-15\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, makeFeatures())));\n    }\n  }]);\n\n  return Mapbox;\n}(React.Component);\n\nexport default Mapbox;","map":{"version":3,"sources":["/Users/flatironschool/Projects/mod5-final-project/Freesh/frontend/src/components/main/mapbox.js"],"names":["React","Component","ReactMapboxGl","Layer","Feature","GeoJSONLayer","Map","accessToken","mbxGeocoding","require","geocodingClient","Mapbox","locations","makeFeatures","console","log","forEach","coordinate","fetch","then","r","json","parsed","geojson","map","listing","forwardGeocode","query","location","limit","send","response","match","body","features","center","push","height","width"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,aAAP,IAAwBC,KAAxB,EAA+BC,OAA/B,QAA8C,iBAA9C;AACA,SAASC,YAAT,QAA6B,iBAA7B;AAEA,IAAMC,GAAG,GAAGJ,aAAa,CAAC;AACxBK,EAAAA,WAAW,EAAE;AADW,CAAD,CAAzB;;AAIA,IAAMC,YAAY,GAAGC,OAAO,CAAC,uCAAD,CAA5B;;AACA,IAAMC,eAAe,GAAGF,YAAY,CAAC;AAAED,EAAAA,WAAW,EAAE;AAAf,CAAD,CAApC;;IAEMI,M;;;;;;;;;;;;;;;;;UAENC,S,GAAY,E;;UAyBZC,Y,GAAe,YAAM;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBH,SAAzB;AACAA,MAAAA,SAAS,CAACI,OAAV,CAAkB,UAAAC,UAAU,EAAI;AAC9B,eACE,oBAAC,OAAD;AAAS,UAAA,WAAW,EAAEA,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAGD,OAJD;AAKD,K;;;;;;;wCA9BmB;AAClBC,MAAAA,KAAK,CAAC,uCAAD,CAAL,CACCC,IADD,CACM,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,OADP,EAECF,IAFD,CAEM,UAAAG,MAAM,EAAI;AACdC,QAAAA,OAAO,GAAGD,MAAV;AACAR,QAAAA,OAAO,CAACC,GAAR,CAAYQ,OAAZ;AAEAA,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAAC,OAAO,EAAI;AACrBf,UAAAA,eAAe,CACdgB,cADD,CACgB;AACdC,YAAAA,KAAK,YAAKF,OAAO,CAACG,QAAb,CADS;AAEdC,YAAAA,KAAK,EAAE;AAFO,WADhB,EAKCC,IALD,GAMCX,IAND,CAMM,UAAAY,QAAQ,EAAI;AAChB,gBAAMC,KAAK,GAAGD,QAAQ,CAACE,IAAT,CAAcC,QAAd,CAAuB,CAAvB,EAA0BC,MAAxC;AACAvB,YAAAA,SAAS,CAACwB,IAAV,CAAeJ,KAAf;AACAlB,YAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;AACD,WAVD;AAWD,SAZD;AAaD,OAnBD;AAoBD;;;6BAWQ;AACP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,GAAD;AACA,QAAA,KAAK,EAAC,mCADN;AAEA,QAAA,MAAM,EAAE,CAAC,CAAC,OAAF,EAAW,OAAX,CAFR;AAGA,QAAA,cAAc,EAAE;AACdyB,UAAAA,MAAM,EAAE,OADM;AAEdC,UAAAA,KAAK,EAAE;AAFO,SAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOA,oBAAC,KAAD;AACA,QAAA,IAAI,EAAC,QADL;AAEA,QAAA,EAAE,EAAC,QAFH;AAGA,QAAA,MAAM,EAAE;AAAE,wBAAc;AAAhB,SAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAICzB,YAAY,EAJb,CAPA,CADA,CADF;AAqBD;;;;EA1DoBb,KAAK,CAACC,S;;AA+D3B,eAAeU,MAAf","sourcesContent":["import React, { Component } from 'react'\nimport ReactMapboxGl, { Layer, Feature } from \"react-mapbox-gl\";\nimport { GeoJSONLayer } from \"react-mapbox-gl\";\n\nconst Map = ReactMapboxGl({\n  accessToken: \"pk.eyJ1IjoianRhbmc5MyIsImEiOiJjanB1OXIyZXQwZWZ4M3hudHM4NGl0cmc3In0.q6DGhvJla097_6b-RMi0Fw\"\n})\n\nconst mbxGeocoding = require('@mapbox/mapbox-sdk/services/geocoding');\nconst geocodingClient = mbxGeocoding({ accessToken: 'pk.eyJ1IjoianRhbmc5MyIsImEiOiJjanB1OXIyZXQwZWZ4M3hudHM4NGl0cmc3In0.q6DGhvJla097_6b-RMi0Fw' });\n\nclass Mapbox extends React.Component {\n\nlocations = []\n\ncomponentDidMount() {\n  fetch('http://localhost:4000/api/v1/listings')\n  .then(r => r.json())\n  .then(parsed => {\n    geojson = parsed\n    console.log(geojson)\n\n    geojson.map(listing => {\n      geocodingClient\n      .forwardGeocode({\n        query: `${listing.location}`,\n        limit: 1\n      })\n      .send()\n      .then(response => {\n        const match = response.body.features[0].center;\n        locations.push(match)\n        console.log(locations)\n      });\n    })\n  })\n}\n\nmakeFeatures = () => {\n  console.log(\"locations\", locations)\n  locations.forEach(coordinate => {\n    return (\n      <Feature coordinates={coordinate}/>\n    )\n  })\n}\n\nrender() {\n  return (\n    <div>\n    <Map\n    style=\"mapbox://styles/mapbox/streets-v9\"\n    center={[-74.0060, 40.7128]}\n    containerStyle={{\n      height: \"100vh\",\n      width: \"100vw\"\n    }}>\n    <Layer\n    type=\"symbol\"\n    id=\"marker\"\n    layout={{ \"icon-image\": \"marker-15\" }}>\n    {makeFeatures()}\n    </Layer>\n\n    </Map>\n\n\n    </div>\n  )\n}\n\n\n}\n\nexport default Mapbox\n"]},"metadata":{},"sourceType":"module"}